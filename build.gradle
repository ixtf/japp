plugins {
    id "idea"
    id "maven"
    id "maven-publish"
    id "io.spring.dependency-management" version "1.0.9.RELEASE" apply false
    id "io.freefair.lombok" version "5.3.0" apply false
    id "com.github.johnrengelman.shadow" version "6.1.0" apply false
    id "com.palantir.docker" version "0.25.0" apply false
    id "com.google.protobuf" version "0.8.14" apply false
    id "io.swagger.core.v3.swagger-gradle-plugin" version "2.1.6" apply false
}

subprojects {
    group "com.github.ixtf.japp"
    version "1.0.0"

    apply plugin: "idea"
    apply plugin: "maven"
    apply plugin: "maven-publish"
    apply plugin: "java"
    apply plugin: "io.spring.dependency-management"
    apply plugin: "io.freefair.lombok"

    sourceCompatibility = 11
    targetCompatibility = 11

    repositories {
        mavenLocal()
        mavenCentral()
        maven { url "https://plugins.gradle.org/m2" }
        maven { url "https://jitpack.io" }
        maven { url "http://maven.geo-solutions.it" }
    }

    dependencyManagement {
        imports {
            mavenBom "com.github.ixtf.japp:bom:${bomVersion}"
        }
    }

    dependencies {
        compile "org.hibernate.validator:hibernate-validator"
        compile "org.glassfish:jakarta.el"
        compile "org.apache.commons:commons-lang3"
        compile "org.apache.commons:commons-text"
        compile "org.apache.commons:commons-collections4"
        compile "commons-io:commons-io"
        compile "io.github.classgraph:classgraph"
        compile "com.github.ben-manes.caffeine:caffeine"
        compile "com.google.guava:guava"
        compile "ch.qos.logback:logback-classic"
        compile "ch.qos.logback:logback-access"
        compile "com.fasterxml.jackson.core:jackson-databind"
        compile "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml"
        compile "com.fasterxml.jackson.datatype:jackson-datatype-jdk8"
        compile "com.fasterxml.jackson.datatype:jackson-datatype-jsr310"
        compile "com.fasterxml.jackson.module:jackson-module-parameter-names"

        testImplementation "io.projectreactor:reactor-tools"
        testImplementation "org.junit.jupiter:junit-jupiter-api:5.6.0"
        testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine"
    }

    test {
        useJUnitPlatform()
    }
}

